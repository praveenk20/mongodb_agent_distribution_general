<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MongoDB Agent - Direct Connection Setup Guide</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        
        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .content {
            padding: 40px;
        }
        
        .section {
            margin-bottom: 40px;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 5px solid #667eea;
        }
        
        h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.8em;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        h3 {
            color: #764ba2;
            margin: 25px 0 15px 0;
            font-size: 1.3em;
        }
        
        .step {
            background: white;
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .step:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
        }
        
        .step-number {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            font-weight: bold;
            margin-right: 10px;
        }
        
        code {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9em;
        }
        
        pre {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
            border-left: 4px solid #667eea;
        }
        
        pre code {
            background: none;
            padding: 0;
        }
        
        .success {
            background: #d4edda;
            border-left: 5px solid #28a745;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
            color: #155724;
        }
        
        .warning {
            background: #fff3cd;
            border-left: 5px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
            color: #856404;
        }
        
        .info {
            background: #d1ecf1;
            border-left: 5px solid #17a2b8;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
            color: #0c5460;
        }
        
        .config-box {
            background: #f8f9fa;
            border: 2px dashed #667eea;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .feature-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            border: 2px solid #e0e0e0;
            text-align: center;
            transition: all 0.3s;
        }
        
        .feature-card:hover {
            border-color: #667eea;
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.2);
        }
        
        .icon {
            font-size: 2em;
            margin-bottom: 10px;
        }
        
        ul, ol {
            margin-left: 20px;
            margin-top: 10px;
        }
        
        li {
            margin: 8px 0;
        }
        
        footer {
            background: #2d2d2d;
            color: white;
            text-align: center;
            padding: 30px;
        }
        
        footer a {
            color: #667eea;
            text-decoration: none;
        }
        
        footer a:hover {
            text-decoration: underline;
        }
        
        .toc {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            border: 2px solid #667eea;
        }
        
        .toc h3 {
            margin-top: 0;
            color: #667eea;
        }
        
        .toc ul {
            list-style: none;
            margin-left: 0;
        }
        
        .toc a {
            color: #764ba2;
            text-decoration: none;
            display: block;
            padding: 5px 0;
        }
        
        .toc a:hover {
            color: #667eea;
            padding-left: 10px;
            transition: all 0.2s;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üöÄ MongoDB Agent</h1>
            <p>Complete Setup Guide - MCP Protocol & Direct Connection</p>
        </header>
        
        <div class="content">
            <!-- Table of Contents -->
            <div class="toc">
                <h3>üìë Table of Contents</h3>
                <ul>
                    <li><a href="#overview">Overview</a></li>
                    <li><a href="#features">Key Features</a></li>
                    <li><a href="#prerequisites">Prerequisites</a></li>
                    <li><a href="#installation">Installation Steps</a></li>
                    <li><a href="#configuration">Configuration</a></li>
                    <li><a href="#testing">Testing the Setup</a></li>
                    <li><a href="#troubleshooting">Troubleshooting</a></li>
                </ul>
            </div>

            <!-- Overview Section -->
            <div class="section" id="overview">
                <h2>üìñ Overview</h2>
                <p>MongoDB Agent is a natural language to MongoDB query converter that uses AI to transform user questions into executable MongoDB queries. This guide covers setup for <strong>both connection types</strong>:</p>
                <ul>
                    <li><strong>MCP Protocol:</strong> Recommended for Claude Desktop integration and advanced MCP clients</li>
                    <li><strong>Direct Connection:</strong> Simple PyMongo-based connection for standalone use</li>
                </ul>
                
                <div class="feature-grid">
                    <div class="feature-card">
                        <div class="icon">üîå</div>
                        <h4>Dual Connection</h4>
                        <p>MCP Protocol or Direct PyMongo connection</p>
                    </div>
                    <div class="feature-card">
                        <div class="icon">ü§ñ</div>
                        <h4>AI-Powered</h4>
                        <p>Supports Azure OpenAI, OpenAI, and Anthropic</p>
                    </div>
                    <div class="feature-card">
                        <div class="icon">üìä</div>
                        <h4>YAML-Driven</h4>
                        <p>Semantic models define your data structure</p>
                    </div>
                    <div class="feature-card">
                        <div class="icon">‚ö°</div>
                        <h4>Fast Setup</h4>
                        <p>5 minutes from download to first query</p>
                    </div>
                </div>
                
                <h3>Connection Types Comparison</h3>
                <table style="width: 100%; border-collapse: collapse; margin-top: 15px;">
                    <thead style="background: #667eea; color: white;">
                        <tr>
                            <th style="padding: 12px; text-align: left; border: 1px solid #ddd;">Feature</th>
                            <th style="padding: 12px; text-align: left; border: 1px solid #ddd;">MCP Protocol</th>
                            <th style="padding: 12px; text-align: left; border: 1px solid #ddd;">Direct Connection</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style="background: white;">
                            <td style="padding: 10px; border: 1px solid #ddd;"><strong>Setup Complexity</strong></td>
                            <td style="padding: 10px; border: 1px solid #ddd;">Complex (requires MCP server)</td>
                            <td style="padding: 10px; border: 1px solid #ddd;">Simple (direct connection)</td>
                        </tr>
                        <tr style="background: #f8f9fa;">
                            <td style="padding: 10px; border: 1px solid #ddd;"><strong>Setup Time</strong></td>
                            <td style="padding: 10px; border: 1px solid #ddd;">30+ minutes</td>
                            <td style="padding: 10px; border: 1px solid #ddd;">5 minutes</td>
                        </tr>
                        <tr style="background: white;">
                            <td style="padding: 10px; border: 1px solid #ddd;"><strong>Dependencies</strong></td>
                            <td style="padding: 10px; border: 1px solid #ddd;">MCP server + OAuth</td>
                            <td style="padding: 10px; border: 1px solid #ddd;">PyMongo only</td>
                        </tr>
                        <tr style="background: #f8f9fa;">
                            <td style="padding: 10px; border: 1px solid #ddd;"><strong>Best For</strong></td>
                            <td style="padding: 10px; border: 1px solid #ddd;">Claude Desktop, MCP clients</td>
                            <td style="padding: 10px; border: 1px solid #ddd;">Standalone apps, testing</td>
                        </tr>
                        <tr style="background: white;">
                            <td style="padding: 10px; border: 1px solid #ddd;"><strong>Latency</strong></td>
                            <td style="padding: 10px; border: 1px solid #ddd;">~150ms (via HTTP)</td>
                            <td style="padding: 10px; border: 1px solid #ddd;">~10ms (direct)</td>
                        </tr>
                        <tr style="background: #f8f9fa;">
                            <td style="padding: 10px; border: 1px solid #ddd;"><strong>Security</strong></td>
                            <td style="padding: 10px; border: 1px solid #ddd;">OAuth + Token caching</td>
                            <td style="padding: 10px; border: 1px solid #ddd;">MongoDB auth</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Features Section -->
            <div class="section" id="features">
                <h2>‚ú® Key Features</h2>
                <ul>
                    <li><strong>Dual Connection Support:</strong> Choose between MCP Protocol or Direct MongoDB connection</li>
                    <li><strong>Multi-LLM Support:</strong> Azure OpenAI, OpenAI, Anthropic Claude</li>
                    <li><strong>YAML Semantic Models:</strong> Define your MongoDB schema and business rules</li>
                    <li><strong>Natural Language Queries:</strong> Ask questions in plain English</li>
                    <li><strong>Query Validation:</strong> Automatic syntax checking and error correction</li>
                    <li><strong>RESTful API:</strong> FastAPI-based HTTP endpoints</li>
                </ul>
            </div>

            <!-- Prerequisites Section -->
            <div class="section" id="prerequisites">
                <h2>üìã Prerequisites</h2>
                
                <div class="step">
                    <h3><span class="step-number">1</span>Python Environment</h3>
                    <p>Python 3.10 or higher required</p>
                    <pre><code>python3 --version
# Should show: Python 3.10.x or higher</code></pre>
                </div>

                <div class="step">
                    <h3><span class="step-number">2</span>MongoDB Access</h3>
                    <p>You need connection credentials for:</p>
                    <ul>
                        <li>MongoDB Atlas (cloud)</li>
                        <li>Self-hosted MongoDB instance</li>
                        <li>Local MongoDB server</li>
                    </ul>
                    <div class="info">
                        <strong>‚ÑπÔ∏è Note:</strong> Connection string format: <code>mongodb+srv://username:password@host/database</code>
                    </div>
                </div>

                <div class="step">
                    <h3><span class="step-number">3</span>LLM API Access</h3>
                    <p>Choose one:</p>
                    <ul>
                        <li><strong>Azure OpenAI:</strong> Endpoint URL + API Key</li>
                        <li><strong>OpenAI:</strong> API Key (starts with sk-)</li>
                        <li><strong>Anthropic:</strong> API Key</li>
                    </ul>
                </div>
            </div>

            <!-- Installation Section -->
            <div class="section" id="installation">
                <h2>‚öôÔ∏è Installation Steps</h2>

                <div class="step">
                    <h3><span class="step-number">1</span>Download the Distribution</h3>
                    <p>Copy the <code>mongodb_agent_distribution_general</code> folder to your desired location:</p>
                    <pre><code>cp -r mongodb_agent_distribution_general ~/my-projects/</code></pre>
                </div>

                <div class="step">
                    <h3><span class="step-number">2</span>Navigate to the Directory</h3>
                    <pre><code>cd ~/my-projects/mongodb_agent_distribution_general</code></pre>
                </div>

                <div class="step">
                    <h3><span class="step-number">3</span>Run Setup Script</h3>
                    <p>The interactive setup script will guide you through the installation:</p>
                    <pre><code>./setup.sh</code></pre>
                    
                    <div class="info">
                        <strong>When prompted, choose your connection type:</strong>
                        
                        <h4>Option 1: MCP Protocol</h4>
                        <ul>
                            <li>Select <strong>1) MCP Protocol</strong></li>
                            <li>Requires: Separate MCP server running</li>
                            <li>Best for: Claude Desktop integration</li>
                        </ul>
                        
                        <h4>Option 2: Direct MongoDB Connection (Recommended for Standalone)</h4>
                        <ul>
                            <li>Select <strong>2) Direct MongoDB Connection</strong></li>
                            <li>Installs PyMongo automatically</li>
                            <li>No MCP server needed</li>
                            <li>Best for: Quick testing and standalone applications</li>
                        </ul>
                        
                        <p><strong>The script will then:</strong></p>
                        <ul>
                            <li>Check Python version</li>
                            <li>Install required dependencies</li>
                            <li>Install the MongoDB Agent package</li>
                            <li>Create necessary directories</li>
                            <li>Copy .env template</li>
                        </ul>
                    </div>
                </div>

                <div class="success">
                    <strong>‚úÖ Installation Complete!</strong> Next step: Configure your environment
                </div>
            </div>

            <!-- Configuration Section -->
            <div class="section" id="configuration">
                <h2>üîß Configuration</h2>

                <div class="step">
                    <h3><span class="step-number">1</span>Edit the .env File</h3>
                    <pre><code>nano .env</code></pre>
                    
                    <div class="config-box">
                        <h4>Required Configuration:</h4>
                        
                        <h5>1. Choose Connection Type</h5>
                        <pre><code># For MCP Protocol:
MONGODB_CONNECTION_TYPE=mcp

# For Direct Connection:
MONGODB_CONNECTION_TYPE=direct</code></pre>
                        
                        <h5>2A. MongoDB MCP Configuration (if using MCP)</h5>
                        <pre><code>MONGODB_MCP_ENDPOINT=http://localhost:3000/mongodb/query
MONGODB_OAUTH_TOKEN_URL=https://your-oauth-server.com/oauth/token
MONGODB_CLIENT_ID=your-client-id
MONGODB_CLIENT_SECRET=your-client-secret</code></pre>
                        
                        <div class="info">
                            <strong>‚ÑπÔ∏è MCP Setup:</strong> You need to run an MCP server separately. The server handles MongoDB connections and OAuth authentication.
                        </div>
                        
                        <h5>2B. MongoDB Direct Configuration (if using Direct)</h5>
                        <pre><code>MONGODB_URI=mongodb+srv://username:password@host/?authMechanism=DEFAULT&authSource=yourdb
MONGODB_DATABASE=your_database_name</code></pre>
                        
                        <div class="warning">
                            <strong>‚ö†Ô∏è Important:</strong> Make sure MONGODB_URI is on a single line without line breaks!
                        </div>
                        
                        <h5>3. LLM Provider (Choose One)</h5>
                        
                        <strong>Option A: Azure OpenAI</strong>
                        <pre><code>LLM_PROVIDER=azure
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com
AZURE_OPENAI_API_KEY=your-azure-api-key
AZURE_OPENAI_DEPLOYMENT_NAME=gpt-4o-mini
AZURE_OPENAI_API_VERSION=2024-07-01-preview</code></pre>
                        
                        <strong>Option B: OpenAI</strong>
                        <pre><code>LLM_PROVIDER=openai
OPENAI_API_KEY=sk-proj-your-key-here
OPENAI_MODEL=gpt-4o-mini</code></pre>
                        
                        <strong>Option C: Cisco Azure (with OAuth)</strong>
                        <pre><code>LLM_PROVIDER=azure
AZURE_OPENAI_ENDPOINT=https://chat-ai.cisco.com
OAUTH_URL=https://id.cisco.com/oauth2/default/v1/token
CLIENT_ID=your-client-id
CLIENT_SECRET=your-client-secret
APP_KEY=your-app-key</code></pre>
                    </div>
                </div>

                <div class="step">
                    <h3><span class="step-number">2</span>Add Semantic Models</h3>
                    <p>Place your YAML semantic model files in the <code>semantic_models/</code> directory:</p>
                    <pre><code>semantic_models/
  ‚îú‚îÄ‚îÄ collection1_semantic_model.yaml
  ‚îú‚îÄ‚îÄ collection2_semantic_model.yaml
  ‚îî‚îÄ‚îÄ ...</code></pre>
                    
                    <div class="info">
                        <strong>‚ÑπÔ∏è Semantic Models</strong> define your MongoDB collections, fields, relationships, and business rules. See existing examples in the semantic_models folder.
                    </div>
                </div>

                <div class="step">
                    <h3><span class="step-number">3</span>Verify Configuration</h3>
                    <p>Test that environment variables are loaded correctly:</p>
                    <pre><code>python3 -c "from dotenv import dotenv_values; config = dotenv_values('.env'); print('Connection Type:', config.get('MONGODB_CONNECTION_TYPE')); print('MongoDB URI:', config.get('MONGODB_URI')[:50] + '...'); print('LLM Provider:', config.get('LLM_PROVIDER'))"</code></pre>
                </div>
            </div>

            <!-- Testing Section -->
            <div class="section" id="testing">
                <h2>üß™ Testing the Setup</h2>

                <div class="step">
                    <h3><span class="step-number">1</span>Start the Server</h3>
                    <pre><code>./start_server.sh</code></pre>
                    
                    <p><strong>For MCP Mode, you should see:</strong></p>
                    <pre><code>üîß Initializing MongoDB Router: MCP mode
‚úÖ MCP client initialized: http://localhost:3000/mongodb/query
‚úÖ MongoDB Agent initialized successfully
üì° Mode: mcp
üì° Server URL: http://127.0.0.1:8000</code></pre>
                    
                    <p><strong>For Direct Mode, you should see:</strong></p>
                    <pre><code>üîß Initializing MongoDB Router: DIRECT mode
‚úÖ Connected to MongoDB: your_database_name
‚úÖ Using Direct MongoDB connection (PyMongo)
‚úÖ MongoDB Agent initialized successfully
üì° Mode: direct
üì° Server URL: http://127.0.0.1:8000</code></pre>
                </div>

                <div class="step">
                    <h3><span class="step-number">2</span>Test with Example Query</h3>
                    <p>Use the provided test script:</p>
                    <pre><code>python3 examples/test_connection.py</code></pre>
                    
                    <p>Or test via API:</p>
                    <pre><code>curl -X POST http://localhost:8000/api/mongodb \
  -H "Content-Type: application/json" \
  -d '{
    "question": "Show me all transactions grouped by state",
    "yaml_file_name": "your_semantic_model.yaml"
  }'</code></pre>
                </div>

                <div class="step">
                    <h3><span class="step-number">3</span>Check API Documentation</h3>
                    <p>Visit the interactive API docs:</p>
                    <ul>
                        <li><strong>Swagger UI:</strong> <a href="http://localhost:8000/docs" target="_blank">http://localhost:8000/docs</a></li>
                        <li><strong>ReDoc:</strong> <a href="http://localhost:8000/redoc" target="_blank">http://localhost:8000/redoc</a></li>
                        <li><strong>Health Check:</strong> <a href="http://localhost:8000/health" target="_blank">http://localhost:8000/health</a></li>
                    </ul>
                </div>

                <div class="success">
                    <h4>‚úÖ Expected Successful Response:</h4>
                    <pre><code>{
  "question": "Show me all transactions...",
  "yaml_file_name": "your_model.yaml",
  "mongodb_query": "db.collection.aggregate([...])",
  "query_result": [...],
  "natural_language_response": "‚Ä¢ State: SUCCESS, Count: 11582\n‚Ä¢ State: PROCESSING, Count: 8976\n...",
  "execution_time_ms": 11145.55,
  "status": "success"
}</code></pre>
                </div>
            </div>

            <!-- Troubleshooting Section -->
            <div class="section" id="troubleshooting">
                <h2>üîç Troubleshooting</h2>

                <div class="step">
                    <h3>‚ùå Error: "MONGODB_URI is required"</h3>
                    <p><strong>Solution:</strong></p>
                    <ol>
                        <li>Check that MONGODB_URI is on a single line in .env file</li>
                        <li>Verify no line breaks in the middle of the URI</li>
                        <li>Run: <code>grep "^MONGODB" .env</code> to check</li>
                        <li>Restart the server after fixing</li>
                    </ol>
                </div>

                <div class="step">
                    <h3>‚ùå Error: "Collection name is required"</h3>
                    <p><strong>Solution:</strong></p>
                    <ul>
                        <li>Ensure your wheel package is up to date</li>
                        <li>Reinstall: <code>pip3 install --force-reinstall --no-deps mongodb_agent_ai-1.0.0-py3-none-any.whl</code></li>
                        <li>Restart the server</li>
                    </ul>
                </div>

                <div class="step">
                    <h3>‚ùå Error: "Could not connect to MongoDB"</h3>
                    <p><strong>Solution:</strong></p>
                    <ol>
                        <li>Verify MongoDB URI is correct</li>
                        <li>Check network connectivity to MongoDB host</li>
                        <li>Verify authentication credentials</li>
                        <li>Check MongoDB server is running</li>
                        <li>Test connection manually: <code>mongosh "your-connection-string"</code></li>
                    </ol>
                </div>

                <div class="step">
                    <h3>‚ùå Error: "YAML file not found"</h3>
                    <p><strong>Solution:</strong></p>
                    <ul>
                        <li>Verify YAML file exists in <code>semantic_models/</code> directory</li>
                        <li>Check filename matches exactly (case-sensitive)</li>
                        <li>Ensure file has <code>.yaml</code> extension</li>
                        <li>Check file permissions are readable</li>
                    </ul>
                </div>

                <div class="step">
                    <h3>‚ùå Server shows wrong connection mode</h3>
                    <p><strong>Solution:</strong></p>
                    <ol>
                        <li>Verify <code>MONGODB_CONNECTION_TYPE</code> setting in .env (either "mcp" or "direct")</li>
                        <li>Restart the server (Ctrl+C then <code>./start_server.sh</code>)</li>
                        <li>Check that .env file is in the same directory where you run the server</li>
                        <li>Ensure the connection type matches your setup (MCP server running or MongoDB accessible)</li>
                    </ol>
                </div>

                <div class="step">
                    <h3>‚ùå MCP Error: "Cannot connect to MCP endpoint"</h3>
                    <p><strong>Solution:</strong></p>
                    <ol>
                        <li>Verify your MCP server is running on the configured endpoint</li>
                        <li>Check <code>MONGODB_MCP_ENDPOINT</code> is correct</li>
                        <li>Test MCP server: <code>curl http://localhost:3000/health</code></li>
                        <li>If MCP server is not available, switch to Direct connection instead</li>
                    </ol>
                </div>

                <div class="info">
                    <strong>üìù View Logs:</strong>
                    <pre><code>tail -f logs/mongodb_agent.log</code></pre>
                </div>
            </div>

            <!-- Performance Section -->
            <div class="section">
                <h2>‚ö° Performance Tips</h2>
                <ul>
                    <li><strong>Token Caching:</strong> OAuth tokens are cached for 3000 seconds by default</li>
                    <li><strong>Connection Pooling:</strong> PyMongo maintains a connection pool automatically</li>
                    <li><strong>Field Optimization:</strong> Semantic models limit fields to top 30 most relevant</li>
                    <li><strong>Query Limits:</strong> Automatically enforces 100 document limit for safety</li>
                    <li><strong>Retry Logic:</strong> Failed queries are automatically refined and retried once</li>
                </ul>
            </div>

            <!-- Architecture Section -->
            <div class="section">
                <h2>üèóÔ∏è Architecture Overview</h2>
                <pre><code>User Question
    ‚Üì
FastAPI Endpoint (/api/mongodb)
    ‚Üì
MongoDB Agent
    ‚Üì
LangGraph Workflow:
    1. Selector Node (Generate Query)
    2. Query Executor Node (Execute via Router)
    3. Output Parser Node (Format Results)
    ‚Üì
Response to User</code></pre>
                
                <h3>Connection Router:</h3>
                <pre><code>Config (MONGODB_CONNECTION_TYPE)
    ‚Üì
MongoDB Router (Smart Selection)
    ‚îú‚îÄ[mcp]‚îÄ‚îÄ‚Üí MCP Client ‚îÄ‚îÄ‚Üí HTTP Request ‚îÄ‚îÄ‚Üí MCP Server ‚îÄ‚îÄ‚Üí MongoDB
    ‚îÇ
    ‚îî‚îÄ[direct]‚îÄ‚îÄ‚Üí Direct Client (PyMongo) ‚îÄ‚îÄ‚Üí MongoDB Database</code></pre>
                
                <h3>MCP Protocol Flow:</h3>
                <pre><code>Query Request
    ‚Üì
MCP Client
    ‚Üì
Token Cache (OAuth)
    ‚Üì
HTTP POST to MCP Server
    ‚Üì
MCP Server (External)
    ‚Üì
MongoDB Connection
    ‚Üì
Query Results</code></pre>
                
                <h3>Direct Connection Flow:</h3>
                <pre><code>Query Request
    ‚Üì
Direct Client (PyMongo)
    ‚Üì
MongoDB Connection Pool
    ‚Üì
MongoDB Database
    ‚Üì
Query Results (Fast - No HTTP overhead)</code></pre>
            </div>

            <!-- File Structure Section -->
            <div class="section">
                <h2>üìÅ File Structure</h2>
                <pre><code>mongodb_agent_distribution_general/
‚îú‚îÄ‚îÄ .env                          # Your configuration
‚îú‚îÄ‚îÄ .env.template                 # Configuration template
‚îú‚îÄ‚îÄ setup.sh                      # Interactive setup script
‚îú‚îÄ‚îÄ start_server.sh               # Server startup script
‚îú‚îÄ‚îÄ mongodb_agent_ai-1.0.0-py3-none-any.whl
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ QUICK_START.md
‚îú‚îÄ‚îÄ SETUP_GUIDE.html             # This file
‚îú‚îÄ‚îÄ semantic_models/              # YAML semantic models
‚îÇ   ‚îî‚îÄ‚îÄ your_collection_model.yaml
‚îú‚îÄ‚îÄ examples/
‚îÇ   ‚îú‚îÄ‚îÄ basic_query.py
‚îÇ   ‚îî‚îÄ‚îÄ test_connection.py
‚îî‚îÄ‚îÄ logs/
    ‚îî‚îÄ‚îÄ mongodb_agent.log         # Application logs</code></pre>
            </div>

            <!-- Next Steps Section -->
            <div class="section">
                <h2>üöÄ Next Steps</h2>
                <ol>
                    <li><strong>Create Semantic Models:</strong> Define your MongoDB collections in YAML format</li>
                    <li><strong>Test Queries:</strong> Try different natural language questions</li>
                    <li><strong>Integrate with Applications:</strong> Use the REST API in your applications</li>
                    <li><strong>Monitor Performance:</strong> Check logs and execution times</li>
                    <li><strong>Optimize:</strong> Fine-tune semantic models based on query patterns</li>
                </ol>
            </div>

            <!-- Support Section -->
            <div class="section">
                <h2>üí¨ Support & Resources</h2>
                <ul>
                    <li><strong>Documentation:</strong> See README.md and QUICK_START.md</li>
                    <li><strong>Examples:</strong> Check the <code>examples/</code> directory</li>
                    <li><strong>Logs:</strong> <code>logs/mongodb_agent.log</code></li>
                    <li><strong>API Docs:</strong> <a href="http://localhost:8000/docs" target="_blank">http://localhost:8000/docs</a></li>
                </ul>
            </div>

        </div>

        <footer>
            <p>MongoDB Agent - Version 1.0.0</p>
            <p>Built with ‚ù§Ô∏è using Python, FastAPI, LangGraph, and PyMongo</p>
            <p style="margin-top: 10px; opacity: 0.7;">Last Updated: December 9, 2025</p>
        </footer>
    </div>
</body>
</html>